{% extends "main/navbar.html" %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <div class="cintainer">
        <h2>Preferences:</h2>
        <hr>
        {% with messages = get_flashed_messages(True) %}
        <form action="/users/update" method="POST" enctype="multipart/form-data">
            <input type="hidden" name='user_id' value="{{user.id}}">
            <div class="form_row mb-2">
                <label class="h4" for="first_name">First Name: </label>
                <input type="text" id="first_name" name="first_name" value="{{user.first_name}}">
            {% for category, message in messages %}
                {% if category == 'first_name' %}
                    <p class="flash_warning h6">
                        {{message}}
                    </p>
                {% endif %}
            {% endfor %}
            </div>

            <div class="form_row mb-2">
                <label class="h4" for="last_name">Last Name: </label>
                <input type="text" id="last_name" name="last_name" value="{{user.last_name}}">
                {% for category, message in messages %}
                {% if category == 'last_name' %}
                    <p class="flash_warning h6">
                        {{message}}
                    </p>
                {% endif %}
            {% endfor %}
            </div>
            
            <div class="form_row mb-2">
                <label class="h6" for="profile_picture">Profile Picture: (You can add this later)</label>
                <input type="file" id="profile_picture" name="profile_picture" >
            {% for category, message in messages %}
                {% if category == 'profile_picture' %}
                    <p class="flash_warning h6">
                        {{message}}
                    </p>
                {% endif %}
            {% endfor %}
            </div>

            <div class="form_row mb-2">
                <label class="h4" for="email">Email: </label>
                <input type="email" id="email" name="email" value="{{user.email}}">
                {% for category, message in messages %}
                {% if category == 'email' %}
                    <p class="flash_warning h6">
                        {{message}}
                    </p>
                {% endif %}
            {% endfor %}
            </div>

            <div class="form_row"><button class="btn-primary" type="submit" id="submit">Update!</button></div>
        </form>
        <button><a href="/{{user.id}}/photos">Edit Your Photos</a></button>
        <div>
            <h3>Favorite Recipes</h3>
            <table>
                {% for recipe in user.favorites %}
                <tr>
                    <td><a href="/recipes/{{recipe.id}}">{{recipe.title}}</a></td>
                    <td><button type="button" value="{{recipe.id}}" class="favorite_toggle">unfavorite</button></td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    {% endwith %}
    
    <script src="{{url_for('static', filename='js/country_codes.js')}}"></script>
    <!-- <script src="{{url_for('static', filename='js/registration.js')}}"></script> Add when add Phone Number Validation -->
    <script src="{{url_for('static', filename='js/preferences.js')}}"></script>
    {% endblock %}
