{% extends 'main/navbar.html' %}
{% block header %}
<title>New Meal</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
{% endblock %}
{% block content %}
<h2>Edit Meal</h2>
<form class="form-control">
    <input type="number" name="meal_id" value="{{meal.id}}" id="meal_id" hidden>
    <div class="mb-3">
        <label for="date">Date:</label>
        <input type="date" name="date" id="date" value="{{meal.date}}">
    </div>
    <div class="mb-3">
        <label for="meal_type">Meal Type</label>
        <select name="meal_type" id="meal_type">
            {% for type in meal_types %}
                <option value="{{type.id}}"
                {% if meal.meal_type.id == type.id %}
                    selected
                {% endif %}
                >{{type.name}}</option>
            {% endfor %}
        </select>
    </div>
    <div>
        <label for="recipes">Add your Saved Recipes</label>
        <select type="list" list="recipe_list" name="recipes" id="recipe_list">
            {% for recipe in user.favorites %}
                <option value="{{recipe.id}}" class="recipe_option">{{recipe.title}}</option>
            {% endfor %}
        </select>
        <button type="button" id="add_button">Add Another</button>
    </div>
    <ul id="recipe_ul">
        {% for recipe in meal.recipes %}
        <span hidden class="current_recipe_ids">{{recipe.id}}</span>
        <details>
            <summary>{{recipe.title}}</summary>
                <details>
                    <summary>Description</summary>
                    <p>
                        {{recipe.description}}
                    </p>
                </details>
                <details>
                    <summary>Types</summary>
                    <p>
                        {% for type in recipe.recipe_types %}
                            {{type.name}},
                        {% endfor %}
                    </p>
                </details>
        </details> 
        {% endfor %}
    </ul>
    <!-- Coming Soon. Add friends or Household to meal -->
    <button type="button" id="submit">Add to Menu</button>
</form>


<script src="{{url_for('static', filename='js/meals.js')}}"></script>
{% endblock %}